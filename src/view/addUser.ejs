<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <title>Add User</title>
</head>
<body class="container">
    <form action="/crud" method="post">
        <% if(user) { %>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="text" name="email" class="form-control" id="email" value="<%= user.email %>"/>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" name="password" class="form-control" id="password" value="<%= user.password %>"/>
            </div>
            <div class="form-group">
                <label for="firstName">FirstName</label>
                <input type="text" name="firstName" class="form-control" id="firstName" value="<%= user.firstName %>"/>
            </div>
            <div class="form-group">
                <label for="lastName">LastName</label>
                <input type="text" name="lastName" class="form-control" id="lastName" value="<%= user.lastName %>"/>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" name="address" class="form-control" id="address" value="<%= user.address %>"/>
            </div>
            <div class="form-group">
                <label for="phoneNumber">Phone Number</label>
                <input type="text" name="phoneNumber" class="form-control" id="phoneNumber" value="<%= user.phoneNumber %>"/>
            </div>
            <div class="form-group">
                <label for="gender">Gender</label>
                <input type="hidden" id="genderValue" value="<%= user.gender %>" />
                <select class="form-control" id="gender" name="gender">
                    <option value="1">Male</option>
                    <option value="2">Female</option>
                </select>
            </div>
            <div class="form-group">
                <label for="role">Role</label>
                <input type="hidden" id="roleValue" value="<%= user.roleId %>">
                <select class="form-control" id="role" name="role">
                    <option value="R1">R1</option>
                    <option value="R2">R2</option>
                    <option value="R3">R3</option>
                </select>
            </div>
        <% } else { %>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="text" name="email" class="form-control" id="email" />
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" name="password" class="form-control" id="password" />
                </div>
                <div class="form-group">
                    <label for="firstName">FirstName</label>
                    <input type="text" name="firstName" class="form-control" id="firstName" />
                </div>
                <div class="form-group">
                    <label for="lastName">LastName</label>
                    <input type="text" name="lastName" class="form-control" id="lastName" />
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" name="address" class="form-control" id="address" />
                </div>
                <div class="form-group">
                    <label for="phoneNumber">Phone Number</label>
                    <input type="text" name="phoneNumber" class="form-control" id="phoneNumber" />
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select class="form-control" id="gender" name="gender">
                        <option value="1">Male</option>
                        <option value="2">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="role">Role</label>
                    <select class="form-control" id="role" name="role">
                        <option value="R1">R1</option>
                        <option value="R2">R2</option>
                        <option value="R3">R3</option>
                    </select>
                </div>
            <% } %>
        <button type="submit" class="btn btn-primary">Submit</button>
        <button type="button" class="btn btn-success" onclick="location.href = 'http://localhost:8080/users'">Back</button>
    </form>

    <script>
        (function(){
            //code here
            let valueGender = document.getElementById("genderValue").value;
            let valueRole = document.getElementById("roleValue").value;
            document.getElementById('gender').value = valueGender === 'true' ? '1' : '2';
            document.getElementById('role').value = valueRole;
        })();
    </script>
</body>
</html>
